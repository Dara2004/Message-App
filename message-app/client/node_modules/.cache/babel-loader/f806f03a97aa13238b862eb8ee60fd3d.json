{"ast":null,"code":"import data from \"../data\";\nconst quotes = [\"Hi Corgi you finally added me!\", \"Hey Corgi!\", \"Woof!\"];\n\nfunction randomQuote() {\n  return quotes[Math.floor(Math.random() * quotes.length)];\n}\n\nconst messages = (state = data.messages, action) => {\n  const existingMessages = state[action.messageId];\n\n  switch (action.type) {\n    case \"CREATE_PERSON\":\n      {\n        const id = Object.keys(state).length;\n        return { ...state,\n          [id]: [{\n            is_user: false,\n            text: randomQuote()\n          }]\n        };\n      }\n\n    case \"SEND_MESSAGE\":\n      {\n        //create a new conversation if id is new\n        if (!existingMessages) {\n          return { ...state,\n            [action.messageId]: [{\n              is_user: true,\n              text: action.message\n            }]\n          };\n        } else {\n          //add message to existing conversation\n          return { ...state,\n            [action.messageId]: [...existingMessages, //preserve existing messages\n            {\n              is_user: true,\n              text: action.message\n            }]\n          };\n        }\n      }\n\n    case \"SET_EDITING\":\n      {\n        return { ...state,\n          editing: {\n            isEditing: true,\n            editedMessageId: action.editedMessageId\n          }\n        };\n      }\n\n    case \"UPDATE_MESSAGE\":\n      {\n        const newState = { ...state\n        };\n        const activeConversation = [...state[action.activeId]];\n        newState[action.activeId] = activeConversation;\n        activeConversation[state.editing.editedMessageId] = {\n          is_user: true,\n          text: action.editedText\n        };\n        newState.editing = {\n          isEditing: false,\n          editedMessageId: null //optional\n\n        };\n        return newState;\n      }\n\n    case \"SET_ACTIVE_ID\":\n      {\n        return { ...state,\n          editing: {\n            isEditing: false\n          }\n        };\n      }\n\n    case \"DELETE_MESSAGE\":\n      {\n        const newState = { ...state\n        }; //all messages\n\n        newState[action.activeId] = newState[action.activeId].filter((message, index) => action.messageId !== index);\n        return newState;\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport default messages;","map":{"version":3,"sources":["/Users/daranguyen/Desktop/UBC/Courses/CPSC436I/assignments/a2/Message-App/message-app/src/reducers/messages.js"],"names":["data","quotes","randomQuote","Math","floor","random","length","messages","state","action","existingMessages","messageId","type","id","Object","keys","is_user","text","message","editing","isEditing","editedMessageId","newState","activeConversation","activeId","editedText","filter","index"],"mappings":"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","sourcesContent":["import data from \"../data\";\n\nconst quotes = [\"Hi Corgi you finally added me!\", \"Hey Corgi!\", \"Woof!\"];\n\nfunction randomQuote() {\n  return quotes[Math.floor(Math.random() * quotes.length)];\n}\n\nconst messages = (state = data.messages, action) => {\n  const existingMessages = state[action.messageId];\n  switch (action.type) {\n    case \"CREATE_PERSON\": {\n      const id = Object.keys(state).length;\n      return {\n        ...state,\n        [id]: [\n          {\n            is_user: false,\n            text: randomQuote(),\n          },\n        ],\n      };\n    }\n    case \"SEND_MESSAGE\": {\n      //create a new conversation if id is new\n      if (!existingMessages) {\n        return {\n          ...state,\n          [action.messageId]: [\n            {\n              is_user: true,\n              text: action.message,\n            },\n          ],\n        };\n      } else {\n        //add message to existing conversation\n        return {\n          ...state,\n          [action.messageId]: [\n            ...existingMessages, //preserve existing messages\n            {\n              is_user: true,\n              text: action.message,\n            },\n          ],\n        };\n      }\n    }\n    case \"SET_EDITING\": {\n      return {\n        ...state,\n        editing: {\n          isEditing: true,\n          editedMessageId: action.editedMessageId,\n        },\n      };\n    }\n    case \"UPDATE_MESSAGE\": {\n      const newState = { ...state };\n      const activeConversation = [...state[action.activeId]];\n      newState[action.activeId] = activeConversation;\n      activeConversation[state.editing.editedMessageId] = {\n        is_user: true,\n        text: action.editedText,\n      };\n      newState.editing = {\n        isEditing: false,\n        editedMessageId: null, //optional\n      };\n      return newState;\n    }\n    case \"SET_ACTIVE_ID\": {\n      return {\n        ...state,\n        editing: {\n          isEditing: false,\n        },\n      };\n    }\n    case \"DELETE_MESSAGE\": {\n      const newState = { ...state }; //all messages\n      newState[action.activeId] = newState[action.activeId].filter(\n        (message, index) => action.messageId !== index\n      );\n      return newState;\n    }\n    default:\n      return state;\n  }\n};\n\nexport default messages;\n"]},"metadata":{},"sourceType":"module"}